import{_ as i,c as n,o as a,ag as e}from"./chunks/framework.Cycwnjj0.js";const k=JSON.parse('{"title":"Application Settings","description":"","frontmatter":{},"headers":[],"relativePath":"configuration/application_settings.md","filePath":"configuration/application_settings.md","lastUpdated":null}'),t={name:"configuration/application_settings.md"};function l(p,s,r,o,h,d){return a(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="application-settings" tabindex="-1">Application Settings <a class="header-anchor" href="#application-settings" aria-label="Permalink to &quot;Application Settings&quot;">​</a></h1><h2 id="configuration-system" tabindex="-1">Configuration System <a class="header-anchor" href="#configuration-system" aria-label="Permalink to &quot;Configuration System&quot;">​</a></h2><p>The BlackSlope API implements the standard ASP.NET Core configuration system, which provides a flexible, hierarchical approach to managing application settings across different environments. The configuration system follows a layered architecture where settings can be overridden based on the deployment environment.</p><h3 id="asp-net-core-configuration" tabindex="-1">ASP.NET Core Configuration <a class="header-anchor" href="#asp-net-core-configuration" aria-label="Permalink to &quot;ASP.NET Core Configuration&quot;">​</a></h3><p>The application leverages the built-in ASP.NET Core configuration framework through the following NuGet packages:</p><ul><li><strong>Microsoft.Extensions.Configuration.FileExtensions</strong> (6.0.0): Enables file-based configuration providers</li><li><strong>Microsoft.Extensions.Configuration.Json</strong> (6.0.0): Provides JSON configuration file support</li></ul><p>Configuration is injected into the <code>Startup</code> class constructor and made available throughout the application via dependency injection:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Startup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> readonly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IConfiguration</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Startup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IConfiguration</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _configuration </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> configuration;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="configuration-sources-hierarchy" tabindex="-1">Configuration Sources Hierarchy <a class="header-anchor" href="#configuration-sources-hierarchy" aria-label="Permalink to &quot;Configuration Sources Hierarchy&quot;">​</a></h3><p>The ASP.NET Core configuration system reads settings from multiple sources in a specific order, with later sources overriding earlier ones:</p><ol><li><strong>appsettings.json</strong> - Base configuration file containing default settings</li><li><strong>appsettings.{Environment}.json</strong> - Environment-specific overrides (e.g., <code>appsettings.Development.json</code>, <code>appsettings.docker.json</code>)</li><li><strong>User Secrets</strong> - Local development secrets (Development environment only)</li><li><strong>Environment Variables</strong> - System-level configuration overrides</li><li><strong>Command-line Arguments</strong> - Runtime parameter overrides</li></ol><p>This hierarchy allows developers to maintain secure, environment-specific configurations without modifying the base settings file.</p><h3 id="environment-specific-configuration" tabindex="-1">Environment-Specific Configuration <a class="header-anchor" href="#environment-specific-configuration" aria-label="Permalink to &quot;Environment-Specific Configuration&quot;">​</a></h3><p>The application determines the current environment through the <code>ASPNETCORE_ENVIRONMENT</code> environment variable. Common values include:</p><ul><li><code>Development</code> - Local development environment</li><li><code>Staging</code> - Pre-production testing environment</li><li><code>Production</code> - Live production environment</li><li><code>docker</code> - Docker containerized deployment</li></ul><p>Environment detection is used in the <code>Configure</code> method to enable development-specific features:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Configure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IApplicationBuilder</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IWebHostEnvironment</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (env.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsDevelopment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseDeveloperExceptionPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // The default HSTS value is 30 days. You may want to change this for production scenarios</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseHsts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="appsettings-json" tabindex="-1">appsettings.json <a class="header-anchor" href="#appsettings-json" aria-label="Permalink to &quot;appsettings.json&quot;">​</a></h2><p>The base configuration file (<code>appsettings.json</code>) contains all default settings for the application. All configuration is nested under a root key matching the assembly name: <code>BlackSlope.Api</code>.</p><h3 id="base-configuration-structure" tabindex="-1">Base Configuration Structure <a class="header-anchor" href="#base-configuration-structure" aria-label="Permalink to &quot;Base Configuration Structure&quot;">​</a></h3><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;BlackSlope.Api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;BaseUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:55644&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Swagger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AzureAd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ApplicationInsights&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;HealthChecks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;MoviesConnectionString&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;AllowedHosts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="common-settings" tabindex="-1">Common Settings <a class="header-anchor" href="#common-settings" aria-label="Permalink to &quot;Common Settings&quot;">​</a></h3><h4 id="base-url-configuration" tabindex="-1">Base URL Configuration <a class="header-anchor" href="#base-url-configuration" aria-label="Permalink to &quot;Base URL Configuration&quot;">​</a></h4><p>The <code>BaseUrl</code> setting defines the default host address for the API:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BaseUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:55644&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>This setting is used for:</p><ul><li>Local development server binding</li><li>Swagger UI base path configuration</li><li>CORS policy configuration</li><li>Health check endpoint registration</li></ul><h4 id="allowed-hosts" tabindex="-1">Allowed Hosts <a class="header-anchor" href="#allowed-hosts" aria-label="Permalink to &quot;Allowed Hosts&quot;">​</a></h4><p>The <code>AllowedHosts</code> setting controls host filtering middleware:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AllowedHosts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>⚠️ Security Warning</strong>: The wildcard (<code>*</code>) value allows requests from any host. In production environments, this should be restricted to specific domain names:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AllowedHosts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api.blackslope.com;*.blackslope.com&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="connection-strings" tabindex="-1">Connection Strings <a class="header-anchor" href="#connection-strings" aria-label="Permalink to &quot;Connection Strings&quot;">​</a></h3><p>The application uses a custom connection string configuration approach rather than the standard <code>ConnectionStrings</code> section. The database connection string is defined directly within the <code>BlackSlope.Api</code> configuration section:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MoviesConnectionString&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data source=.,1433;initial catalog=movies;Integrated Security=true;MultipleActiveResultSets=True;&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Connection String Components</strong>:</p><table tabindex="0"><thead><tr><th>Component</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>data source</code></td><td><code>.,1433</code></td><td>SQL Server instance (local machine, port 1433)</td></tr><tr><td><code>initial catalog</code></td><td><code>movies</code></td><td>Database name</td></tr><tr><td><code>Integrated Security</code></td><td><code>true</code></td><td>Uses Windows Authentication</td></tr><tr><td><code>MultipleActiveResultSets</code></td><td><code>True</code></td><td>Enables MARS for concurrent query execution</td></tr></tbody></table><p>This connection string is accessed in the repository configuration:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddMovieRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_configuration);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>The repository extension method retrieves the connection string from the configuration and configures Entity Framework Core accordingly.</p><h2 id="environment-specific-files" tabindex="-1">Environment-Specific Files <a class="header-anchor" href="#environment-specific-files" aria-label="Permalink to &quot;Environment-Specific Files&quot;">​</a></h2><h3 id="appsettings-development-json" tabindex="-1">appsettings.Development.json <a class="header-anchor" href="#appsettings-development-json" aria-label="Permalink to &quot;appsettings.Development.json&quot;">​</a></h3><p>The Development environment configuration file overrides logging settings for enhanced debugging during local development:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Logging&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;LogLevel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Debug&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;System&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Information&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Microsoft&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Information&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Logging Level Configuration</strong>:</p><table tabindex="0"><thead><tr><th>Category</th><th>Level</th><th>Purpose</th></tr></thead><tbody><tr><td><code>Default</code></td><td><code>Debug</code></td><td>Application code logs at Debug level and above</td></tr><tr><td><code>System</code></td><td><code>Information</code></td><td>System-level logs at Information level and above</td></tr><tr><td><code>Microsoft</code></td><td><code>Information</code></td><td>ASP.NET Core framework logs at Information level and above</td></tr></tbody></table><p>This configuration provides verbose logging for application code while reducing noise from framework components.</p><p><strong>Note</strong>: This file uses the standard ASP.NET Core <code>Logging</code> section rather than the custom <code>Serilog</code> section defined in the base configuration. The application appears to support both logging configurations, with Serilog providing more advanced features (see Logging Configuration section below).</p><h3 id="appsettings-docker-json" tabindex="-1">appsettings.docker.json <a class="header-anchor" href="#appsettings-docker-json" aria-label="Permalink to &quot;appsettings.docker.json&quot;">​</a></h3><p>The Docker environment configuration file provides container-specific overrides:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;BlackSlope.Api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;WriteToFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;WriteToConsole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;MoviesConnectionString&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data source=db,1433;initial catalog=movies;User Id=sa;Password=YourStrong!Passw0rd;MultipleActiveResultSets=True&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Docker-Specific Changes</strong>:</p><ol><li><p><strong>Logging Configuration</strong>:</p><ul><li>Enables file-based logging (<code>WriteToFile: true</code>)</li><li>Disables console logging (<code>WriteToConsole: false</code>)</li><li>File logging is preferred in containers for log aggregation and persistence</li></ul></li><li><p><strong>Database Connection</strong>:</p><ul><li>Changes data source from <code>.</code> (localhost) to <code>db</code> (Docker Compose service name)</li><li>Switches from Integrated Security (Windows Auth) to SQL Server Authentication</li><li>Uses SQL Server credentials: <code>sa</code> user with password</li><li><strong>⚠️ Security Warning</strong>: The hardcoded password should be replaced with environment variables or Docker secrets in production</li></ul></li></ol><p><strong>Docker Compose Integration</strong>:</p><p>The <code>db</code> hostname corresponds to a SQL Server container service defined in <code>docker-compose.yml</code>. The connection string assumes:</p><ul><li>A SQL Server container named <code>db</code></li><li>SQL Server listening on port 1433</li><li>SA account enabled with the specified password</li><li>The <code>movies</code> database created during container initialization</li></ul><p>For more information on Docker deployment, see <a href="/deployment/docker.html">Docker Deployment Documentation</a>.</p><h3 id="environment-variable-overrides" tabindex="-1">Environment Variable Overrides <a class="header-anchor" href="#environment-variable-overrides" aria-label="Permalink to &quot;Environment Variable Overrides&quot;">​</a></h3><p>Any configuration value can be overridden using environment variables with a specific naming convention:</p><p><strong>Format</strong>: <code>{SectionName}__{SubSectionName}__{PropertyName}</code></p><p><strong>Examples</strong>:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override BaseUrl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__BaseUrl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=https://api.production.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override Azure AD Tenant</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__AzureAd__Tenant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=production-tenant-id</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override Serilog minimum level</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__Serilog__MinimumLevel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=warning</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Override connection string</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__MoviesConnectionString</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;Server=prod-sql;Database=movies;...&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Docker Environment Variables</strong>:</p><p>When running in Docker, environment variables can be specified in <code>docker-compose.yml</code>:</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ASPNETCORE_ENVIRONMENT=docker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BlackSlope.Api__AzureAd__Tenant=\${AZURE_TENANT_ID}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BlackSlope.Api__MoviesConnectionString=\${DB_CONNECTION_STRING}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="configuration-sections" tabindex="-1">Configuration Sections <a class="header-anchor" href="#configuration-sections" aria-label="Permalink to &quot;Configuration Sections&quot;">​</a></h2><h3 id="host-configuration" tabindex="-1">Host Configuration <a class="header-anchor" href="#host-configuration" aria-label="Permalink to &quot;Host Configuration&quot;">​</a></h3><p>The application uses a strongly-typed configuration model through the <code>HostConfig</code> class, which aggregates all configuration sections:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HostConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwaggerConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Swagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AzureAdConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AzureAd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SerilogConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Serilog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationInsightsConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationInsights</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HealthChecksConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HealthChecks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Configuration Binding</strong>:</p><p>The <code>HostConfig</code> is bound to the configuration section matching the assembly name and registered as a singleton:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IServiceCollection</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _configuration);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetSection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Assembly.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetExecutingAssembly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().Name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HostConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> serviceProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BuildServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HostConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serviceProvider.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HostConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>This approach provides:</p><ul><li><strong>Type Safety</strong>: Compile-time checking of configuration properties</li><li><strong>IntelliSense Support</strong>: IDE autocomplete for configuration values</li><li><strong>Validation</strong>: Ability to implement validation logic in configuration classes</li><li><strong>Dependency Injection</strong>: Configuration objects can be injected into services</li></ul><p><strong>Usage Example</strong>:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyService</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> readonly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HostConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HostConfig</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DoWork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> baseUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _config.BaseUrl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> swaggerVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _config.Swagger.Version;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>For detailed service configuration patterns, see <a href="/configuration/service_configuration.html">Service Configuration Documentation</a>.</p><h3 id="swagger-configuration" tabindex="-1">Swagger Configuration <a class="header-anchor" href="#swagger-configuration" aria-label="Permalink to &quot;Swagger Configuration&quot;">​</a></h3><p>Swagger/OpenAPI documentation is configured through the <code>SwaggerConfig</code> section:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Swagger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ApplicationName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BlackSlope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;XmlFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BlackSlope.Api.xml&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Configuration Properties</strong>:</p><table tabindex="0"><thead><tr><th>Property</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>Version</code></td><td><code>&quot;1&quot;</code></td><td>API version number for Swagger documentation</td></tr><tr><td><code>ApplicationName</code></td><td><code>&quot;BlackSlope&quot;</code></td><td>Display name in Swagger UI</td></tr><tr><td><code>XmlFile</code></td><td><code>&quot;BlackSlope.Api.xml&quot;</code></td><td>XML documentation file for API comments</td></tr></tbody></table><p><strong>Swagger Integration</strong>:</p><p>The Swagger configuration is applied in the <code>ConfigureServices</code> method:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSwagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HostConfig.Swagger);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>And enabled in the request pipeline:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseSwagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HostConfig.Swagger);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>XML Documentation</strong>:</p><p>The <code>XmlFile</code> property references an XML documentation file generated from code comments. To enable XML documentation generation, ensure the project file includes:</p><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">PropertyGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">GenerateDocumentationFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;true&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">GenerateDocumentationFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DocumentationFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;BlackSlope.Api.xml&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DocumentationFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">PropertyGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>This enables rich API documentation with parameter descriptions, response types, and example values in the Swagger UI.</p><p><strong>Swagger UI Access</strong>:</p><p>The Swagger UI is typically available at:</p><ul><li>Development: <code>http://localhost:55644/swagger</code></li><li>Production: <code>{BaseUrl}/swagger</code></li></ul><p>The application uses <strong>Swashbuckle.AspNetCore.SwaggerUI</strong> (version 6.3.0) for the interactive API documentation interface.</p><h3 id="azure-ad-configuration" tabindex="-1">Azure AD Configuration <a class="header-anchor" href="#azure-ad-configuration" aria-label="Permalink to &quot;Azure AD Configuration&quot;">​</a></h3><p>Azure Active Directory authentication is configured through the <code>AzureAd</code> section:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AzureAd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;AadInstance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://login.microsoftonline.com/{0}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Tenant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[tenant-id]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Audience&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://[host-name]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Configuration Properties</strong>:</p><table tabindex="0"><thead><tr><th>Property</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>AadInstance</code></td><td>Azure AD authentication endpoint template</td><td><code>https://login.microsoftonline.com/{0}</code></td></tr><tr><td><code>Tenant</code></td><td>Azure AD tenant ID or domain name</td><td><code>contoso.onmicrosoft.com</code> or GUID</td></tr><tr><td><code>Audience</code></td><td>Expected audience (resource) in JWT tokens</td><td><code>https://api.blackslope.com</code></td></tr></tbody></table><p><strong>Placeholder Values</strong>:</p><p>The configuration file contains placeholder values that must be replaced:</p><ul><li><code>[tenant-id]</code>: Replace with your Azure AD tenant ID</li><li><code>[host-name]</code>: Replace with your API&#39;s public hostname</li></ul><p><strong>Azure AD Integration</strong>:</p><p>The Azure AD configuration is applied in the <code>ConfigureServices</code> method:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddAzureAd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HostConfig.AzureAd);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>This extension method configures:</p><ul><li>JWT Bearer authentication</li><li>Token validation parameters</li><li>Azure AD authority URL construction</li><li>Audience validation</li></ul><p><strong>Authentication Libraries</strong>:</p><p>The application uses multiple authentication libraries:</p><ul><li><strong>Azure.Identity</strong> (1.14.2): Modern Azure AD authentication with managed identity support</li><li><strong>Microsoft.IdentityModel.Clients.ActiveDirectory</strong> (5.2.9): Legacy ADAL library for backward compatibility</li><li><strong>Microsoft.IdentityModel.JsonWebTokens</strong> (7.7.1): JWT token handling</li><li><strong>System.IdentityModel.Tokens.Jwt</strong> (7.7.1): JWT token validation</li></ul><p><strong>Authentication Middleware</strong>:</p><p>Authentication is enabled in the request pipeline:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UseAuthentication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>This middleware must be placed after <code>UseRouting()</code> and before <code>UseEndpoints()</code> to properly secure API endpoints.</p><p><strong>Security Considerations</strong>:</p><ol><li><strong>Token Validation</strong>: The application validates JWT tokens issued by Azure AD</li><li><strong>Audience Validation</strong>: Ensures tokens are intended for this API</li><li><strong>Issuer Validation</strong>: Verifies tokens are issued by the configured Azure AD tenant</li><li><strong>Signature Validation</strong>: Validates token signatures using Azure AD public keys</li></ol><p>For comprehensive authentication implementation details, see <a href="/security/authentication.html">Authentication Documentation</a>.</p><p><strong>Environment-Specific Configuration</strong>:</p><p>Different environments should use different Azure AD configurations:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__AzureAd__Tenant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=dev-tenant-id</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__AzureAd__Audience</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=https://dev-api.blackslope.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__AzureAd__Tenant</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=prod-tenant-id</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__AzureAd__Audience</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=https://api.blackslope.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="logging-configuration" tabindex="-1">Logging Configuration <a class="header-anchor" href="#logging-configuration" aria-label="Permalink to &quot;Logging Configuration&quot;">​</a></h3><p>The application implements custom logging configuration through the <code>Serilog</code> section:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;MinimumLevel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;information&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;FileName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;log.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToConsole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Configuration Properties</strong>:</p><table tabindex="0"><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>MinimumLevel</code></td><td>string/int</td><td><code>&quot;information&quot;</code></td><td>Minimum log level to capture</td></tr><tr><td><code>FileName</code></td><td>string</td><td><code>&quot;log.txt&quot;</code></td><td>Log file name for file-based logging</td></tr><tr><td><code>WriteToFile</code></td><td>string</td><td><code>&quot;false&quot;</code></td><td>Enable/disable file logging</td></tr><tr><td><code>WriteToConsole</code></td><td>string</td><td><code>&quot;true&quot;</code></td><td>Enable/disable console logging</td></tr><tr><td><code>WriteToAppInsights</code></td><td>string</td><td><code>&quot;false&quot;</code></td><td>Enable/disable Application Insights logging</td></tr></tbody></table><p><strong>Log Levels</strong>:</p><p>The <code>MinimumLevel</code> can be specified as either a numeric value or string name:</p><table tabindex="0"><thead><tr><th>Level</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Verbose</td><td>0</td><td>Most detailed logging</td></tr><tr><td>Debug</td><td>1</td><td>Debugging information</td></tr><tr><td>Information</td><td>2</td><td>General informational messages</td></tr><tr><td>Warning</td><td>3</td><td>Warning messages</td></tr><tr><td>Error</td><td>4</td><td>Error messages</td></tr><tr><td>Fatal</td><td>5</td><td>Critical failures</td></tr></tbody></table><p><strong>Logging Sinks</strong>:</p><p>The application supports multiple logging destinations (sinks):</p><ol><li><p><strong>Console Logging</strong>: Outputs logs to the console (stdout)</p><ul><li>Enabled by default in development</li><li>Disabled in Docker containers</li><li>Useful for local debugging and cloud platform log aggregation</li></ul></li><li><p><strong>File Logging</strong>: Writes logs to a text file</p><ul><li>Disabled by default in development</li><li>Enabled in Docker containers</li><li>File location: Application root directory</li><li>File name configurable via <code>FileName</code> property</li></ul></li><li><p><strong>Application Insights Logging</strong>: Sends logs to Azure Application Insights</p><ul><li>Disabled by default</li><li>Requires valid <code>InstrumentationKey</code> in ApplicationInsights section</li><li>Provides cloud-based log aggregation and analysis</li></ul></li></ol><p><strong>Environment-Specific Logging</strong>:</p><p>Different environments use different logging configurations:</p><p><strong>Development</strong> (appsettings.json):</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;MinimumLevel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;information&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToConsole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Docker</strong> (appsettings.docker.json):</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToFile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToConsole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Production</strong> (via environment variables):</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__Serilog__MinimumLevel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=warning</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__Serilog__WriteToAppInsights</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__Serilog__WriteToConsole</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__Serilog__WriteToFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Logging Dependencies</strong>:</p><p>The application uses:</p><ul><li><strong>Microsoft.Extensions.Logging.Debug</strong> (6.0.0): Debug output provider</li><li>Custom Serilog integration (configuration suggests Serilog usage, though not explicitly listed in dependencies)</li></ul><p><strong>Best Practices</strong>:</p><ol><li><strong>Development</strong>: Use console logging with <code>Debug</code> or <code>Information</code> level</li><li><strong>Docker</strong>: Use file logging for container log persistence</li><li><strong>Production</strong>: Use Application Insights with <code>Warning</code> or <code>Error</code> level</li><li><strong>Sensitive Data</strong>: Never log sensitive information (passwords, tokens, PII)</li></ol><h3 id="application-insights-configuration" tabindex="-1">Application Insights Configuration <a class="header-anchor" href="#application-insights-configuration" aria-label="Permalink to &quot;Application Insights Configuration&quot;">​</a></h3><p>Azure Application Insights integration is configured through the <code>ApplicationInsights</code> section:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ApplicationInsights&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;InstrumentationKey&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[instrumentation-key]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Configuration Properties</strong>:</p><table tabindex="0"><thead><tr><th>Property</th><th>Description</th><th>Format</th></tr></thead><tbody><tr><td><code>InstrumentationKey</code></td><td>Application Insights resource key</td><td>GUID format</td></tr></tbody></table><p><strong>Placeholder Value</strong>:</p><p>The <code>[instrumentation-key]</code> placeholder must be replaced with an actual Application Insights instrumentation key from the Azure portal.</p><p><strong>Application Insights Features</strong>:</p><p>When properly configured, Application Insights provides:</p><ul><li><strong>Request Tracking</strong>: Automatic HTTP request logging</li><li><strong>Dependency Tracking</strong>: External service call monitoring</li><li><strong>Exception Tracking</strong>: Unhandled exception capture</li><li><strong>Custom Telemetry</strong>: Application-specific metrics and events</li><li><strong>Performance Monitoring</strong>: Response time and throughput analysis</li><li><strong>Log Aggregation</strong>: Centralized log collection and querying</li></ul><p><strong>Integration with Serilog</strong>:</p><p>The Application Insights integration works in conjunction with the Serilog configuration:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Serilog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;WriteToAppInsights&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>When <code>WriteToAppInsights</code> is enabled, log entries are sent to Application Insights for analysis and alerting.</p><p><strong>Environment-Specific Keys</strong>:</p><p>Different environments should use different Application Insights resources:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__ApplicationInsights__InstrumentationKey</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=dev-key-guid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Staging</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__ApplicationInsights__InstrumentationKey</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=staging-key-guid</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BlackSlope.Api__ApplicationInsights__InstrumentationKey</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=prod-key-guid</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>Security Considerations</strong>:</p><ul><li>Instrumentation keys are not secrets but should still be managed carefully</li><li>Use separate Application Insights resources per environment</li><li>Consider using Azure Key Vault for centralized key management</li><li>Rotate keys periodically as part of security best practices</li></ul><h3 id="health-checks-configuration" tabindex="-1">Health Checks Configuration <a class="header-anchor" href="#health-checks-configuration" aria-label="Permalink to &quot;Health Checks Configuration&quot;">​</a></h3><p>The application implements health check endpoints for monitoring and orchestration:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HealthChecks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Endpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/health&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Configuration Properties</strong>:</p><table tabindex="0"><thead><tr><th>Property</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>Endpoint</code></td><td><code>&quot;/health&quot;</code></td><td>URL path for health check endpoint</td></tr></tbody></table><p><strong>Health Check Implementation</strong>:</p><p>Health checks are configured in the <code>HealthCheckStartup</code> class:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HealthCheckStartup.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ConfigureServices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(services, _configuration);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>And registered in the request pipeline:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HealthCheckStartup.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Configure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app, env, HostConfig);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Health Check Dependencies</strong>:</p><p>The application uses the following health check packages:</p><ul><li><strong>AspNetCore.HealthChecks.SqlServer</strong> (5.0.3): SQL Server connectivity checks</li><li><strong>Microsoft.Extensions.Diagnostics.HealthChecks.EntityFrameworkCore</strong> (6.0.1): EF Core database context checks</li></ul><p><strong>Health Check Types</strong>:</p><p>The application likely implements multiple health checks:</p><ol><li><p><strong>SQL Server Connectivity</strong>: Verifies database connection</p><ul><li>Tests connection to the <code>MoviesConnectionString</code> database</li><li>Validates SQL Server is accessible and responsive</li></ul></li><li><p><strong>Entity Framework Core Context</strong>: Validates EF Core DbContext</p><ul><li>Ensures database schema is accessible</li><li>Verifies migrations are applied</li></ul></li></ol><p><strong>Health Check Response Format</strong>:</p><p>Health check endpoints typically return JSON responses:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Healthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;totalDuration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;00:00:00.0123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;entries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;SqlServer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Healthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;00:00:00.0100000&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;EntityFrameworkCore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Healthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;00:00:00.0023456&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>Health Check Status Codes</strong>:</p><table tabindex="0"><thead><tr><th>Status</th><th>HTTP Code</th><th>Description</th></tr></thead><tbody><tr><td>Healthy</td><td>200</td><td>All checks passed</td></tr><tr><td>Degraded</td><td>200</td><td>Some checks passed with warnings</td></tr><tr><td>Unhealthy</td><td>503</td><td>One or more checks failed</td></tr></tbody></table><p><strong>Usage Scenarios</strong>:</p><ol><li><strong>Container Orchestration</strong>: Kubernetes/Docker Swarm liveness and readiness probes</li><li><strong>Load Balancers</strong>: Backend health monitoring</li><li><strong>Monitoring Systems</strong>: Automated health status polling</li><li><strong>DevOps Dashboards</strong>: Real-time application health visualization</li></ol><p><strong>Example Health Check Request</strong>:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:55644/health</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Production Considerations</strong>:</p><ol><li><strong>Security</strong>: Consider authentication for health check endpoints in production</li><li><strong>Detailed vs. Simple</strong>: Provide detailed health information for internal monitoring, simple status for external load balancers</li><li><strong>Performance</strong>: Ensure health checks execute quickly (&lt; 1 second)</li><li><strong>Dependencies</strong>: Include checks for all critical dependencies (database, external APIs, cache)</li></ol><hr><h2 id="configuration-best-practices" tabindex="-1">Configuration Best Practices <a class="header-anchor" href="#configuration-best-practices" aria-label="Permalink to &quot;Configuration Best Practices&quot;">​</a></h2><h3 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h3><ol><li><strong>Never commit secrets</strong>: Use User Secrets for local development, environment variables or Azure Key Vault for production</li><li><strong>Placeholder values</strong>: Replace all <code>[placeholder]</code> values before deployment</li><li><strong>Connection strings</strong>: Use managed identities or Azure SQL authentication in production</li><li><strong>CORS policy</strong>: Restrict <code>AllowedHosts</code> and CORS origins in production</li></ol><h3 id="environment-management" tabindex="-1">Environment Management <a class="header-anchor" href="#environment-management" aria-label="Permalink to &quot;Environment Management&quot;">​</a></h3><ol><li><strong>Environment variables</strong>: Use environment variables for environment-specific overrides</li><li><strong>Configuration validation</strong>: Implement startup validation for required configuration values</li><li><strong>Default values</strong>: Provide sensible defaults in <code>appsettings.json</code></li><li><strong>Documentation</strong>: Document all configuration properties and their expected values</li></ol><h3 id="deployment" tabindex="-1">Deployment <a class="header-anchor" href="#deployment" aria-label="Permalink to &quot;Deployment&quot;">​</a></h3><ol><li><strong>Docker</strong>: Use <code>appsettings.docker.json</code> for container-specific settings</li><li><strong>Azure</strong>: Leverage Azure App Configuration for centralized configuration management</li><li><strong>CI/CD</strong>: Inject configuration values during deployment pipeline</li><li><strong>Monitoring</strong>: Enable Application Insights in production environments</li></ol><h3 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h3><p><strong>Configuration not loading</strong>:</p><ul><li>Verify file is set to &quot;Copy to Output Directory&quot;</li><li>Check <code>ASPNETCORE_ENVIRONMENT</code> variable is set correctly</li><li>Ensure JSON syntax is valid (no trailing commas, proper quotes)</li></ul><p><strong>Environment variables not working</strong>:</p><ul><li>Verify double underscore (<code>__</code>) separator syntax</li><li>Check environment variable is set before application starts</li><li>Use <code>IConfiguration.GetDebugView()</code> to inspect configuration sources</li></ul><p><strong>Connection string issues</strong>:</p><ul><li>Test connection string independently using SQL Server Management Studio</li><li>Verify SQL Server is accessible from the application host</li><li>Check firewall rules and network connectivity</li><li>Ensure database exists and user has appropriate permissions</li></ul>`,206)])])}const g=i(t,[["render",l]]);export{k as __pageData,g as default};
